#!/bin/bash

SCRIPT=$1
TRIALS=$2

# sanity check (SCRIPT is mandatory, TRIALS is optional)
if [ -z "$SCRIPT" ]; then
	echo "Usage: $0 <script> [trials=3]"
	exit 1
fi

# generate a traceId with micro-second precision
TRACE_ID=$(date +%s%3N)
FOLDER="results/exp_$TRACE_ID"

tsx "$SCRIPT" "$TRACE_ID" "$TRIALS" | tee -a "$FOLDER/experiment.log"
